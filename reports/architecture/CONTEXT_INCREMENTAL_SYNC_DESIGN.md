# å¢é‡ä¸Šä¸‹æ–‡åŒæ­¥æœºåˆ¶è®¾è®¡æ–¹æ¡ˆ

> **ä»»åŠ¡ç¼–å·ï¼š** P1-001
> **è®¾è®¡è€…ï¼š** Coordinator Agent
> **åˆ›å»ºæ—¥æœŸï¼š** 2026-02-06
> **ç›®æ ‡å»¶è¿Ÿï¼š** 15 åˆ†é’Ÿ â†’ 2 åˆ†é’Ÿï¼ˆ7.5å€æå‡ï¼‰

---

## ä¸€ã€é—®é¢˜åˆ†æ

### 1.1 å½“å‰ç—›ç‚¹

| æŒ‡æ ‡ | å½“å‰å€¼ | é—®é¢˜ |
|------|--------|------|
| **æ›´æ–°å»¶è¿Ÿ** | 15 åˆ†é’Ÿ | è§’è‰²é—´ä¿¡æ¯åŒæ­¥ä¸åŠæ—¶ |
| **æ–‡ä»¶å¤§å°** | ~21KB | æ¯æ¬¡é‡å†™æ•´ä¸ªæ–‡ä»¶å¼€é”€å¤§ |
| **IO å¼€é”€** | 100% | æ— å˜æ›´æ£€æµ‹ï¼Œå…¨é‡å†™å…¥ |
| **åŒæ­¥æœºåˆ¶** | è½®è¯¢ | æ— ä¸»åŠ¨é€šçŸ¥ |

### 1.2 æ ¹æœ¬åŸå› 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å½“å‰æ›´æ–°æµç¨‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  1. å®šæ—¶å™¨è§¦å‘ï¼ˆ15åˆ†é’Ÿï¼‰                              â”‚
â”‚     â†“                                               â”‚
â”‚  2. è¯»å–å®Œæ•´ä¸Šä¸‹æ–‡æ–‡ä»¶ï¼ˆ~21KBï¼‰                       â”‚
â”‚     â†“                                               â”‚
â”‚  3. ç”Ÿæˆæ–°å†…å®¹ï¼ˆå…¨é‡ï¼‰                                â”‚
â”‚     â†“                                               â”‚
â”‚  4. å†™å…¥æ•´ä¸ªæ–‡ä»¶ï¼ˆè¦†ç›–ï¼‰                              â”‚
â”‚     â†“                                               â”‚
â”‚  5. å…¶ä»–è§’è‰²ä¸‹æ¬¡è½®è¯¢æ—¶å‘ç°æ›´æ–°                        â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜ï¼š
- æ— å˜æ›´æ£€æµ‹ï¼Œå³ä½¿å†…å®¹æ²¡å˜ä¹Ÿä¼šé‡å†™
- æ— é€šçŸ¥æœºåˆ¶ï¼Œä¾èµ–è½®è¯¢å‘ç°æ›´æ–°
- æ— æ‘˜è¦æœºåˆ¶ï¼Œæ¯æ¬¡éƒ½è¦è§£æå®Œæ•´æ–‡ä»¶
```

---

## äºŒã€å¢é‡åŒæ­¥æ¶æ„è®¾è®¡

### 2.1 æ ¸å¿ƒæ€æƒ³

**åˆ†å±‚åŒæ­¥ç­–ç•¥ï¼š**
1. **å…ƒæ•°æ®å±‚**ï¼ˆ~1KBï¼‰ï¼šå¿«é€ŸåŒæ­¥å˜æ›´æ‘˜è¦
2. **å¢é‡å±‚**ï¼ˆ~5KBï¼‰ï¼šåŒæ­¥å®é™…å˜æ›´å†…å®¹
3. **åŸºå‡†å±‚**ï¼ˆ~21KBï¼‰ï¼šæŒ‰éœ€å…¨é‡åŒæ­¥

### 2.2 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¢é‡ä¸Šä¸‹æ–‡åŒæ­¥ç³»ç»Ÿ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Context     â”‚    â”‚   Diff       â”‚    â”‚  Change      â”‚        â”‚
â”‚  â”‚  Manager     â”‚â—„â”€â”€â”€â”¤   Engine     â”‚â—„â”€â”€â”€â”¤  Detector    â”‚        â”‚
â”‚  â”‚              â”‚    â”‚              â”‚    â”‚              â”‚        â”‚
â”‚  â”‚ â€¢ ç›‘å¬æ–‡ä»¶å˜æ›´ â”‚    â”‚ â€¢ ç”Ÿæˆ diff  â”‚    â”‚ â€¢ ç›‘æ§å…³é”®æ®µ â”‚        â”‚
â”‚  â”‚ â€¢ ç®¡ç†ç‰ˆæœ¬   â”‚    â”‚ â€¢ åº”ç”¨ patch  â”‚    â”‚ â€¢ è§¦å‘åŒæ­¥   â”‚        â”‚
â”‚  â”‚ â€¢ åè°ƒé€šçŸ¥   â”‚    â”‚ â€¢ å‹ç¼©å·®å¼‚   â”‚    â”‚ â€¢ ç”Ÿæˆæ‘˜è¦   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â”‚                  â”‚                   â”‚                â”‚
â”‚           â–¼                  â–¼                   â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    ä¸‰å±‚å­˜å‚¨                               â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
â”‚  â”‚  â”‚   Meta     â”‚  â”‚  Delta     â”‚  â”‚   Snapshot     â”‚    â”‚     â”‚
â”‚  â”‚  â”‚   Store    â”‚  â”‚  Store     â”‚  â”‚    Store       â”‚    â”‚     â”‚
â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚                â”‚    â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ å˜æ›´ç´¢å¼•  â”‚  â”‚ â€¢ å¢é‡è®°å½•  â”‚  â”‚ â€¢ åŸºå‡†ç‰ˆæœ¬     â”‚    â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ ç‰ˆæœ¬å·   â”‚  â”‚ â€¢ diff æ•°æ® â”‚  â”‚ â€¢ å®Œæ•´ä¸Šä¸‹æ–‡   â”‚    â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ æ‘˜è¦ä¿¡æ¯  â”‚  â”‚ â€¢ å‹ç¼©å­˜å‚¨  â”‚  â”‚ â€¢ æŒ‰éœ€åŠ è½½     â”‚    â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
â”‚  â”‚      1KB             5KB              21KB              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                   é€šçŸ¥ç³»ç»Ÿ                                â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  Event Bus â†’ Notifier â†’ Subscribers (WebSocket/Polling) â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€æ ¸å¿ƒç®—æ³•è®¾è®¡

### 3.1 å˜æ›´æ£€æµ‹ç®—æ³•ï¼ˆæ®µè½çº§åˆ«ï¼‰

```typescript
/**
 * ä¸Šä¸‹æ–‡å˜æ›´æ£€æµ‹å™¨
 *
 * @description
 * åŸºäºæ®µè½çº§åˆ«çš„å˜æ›´æ£€æµ‹ï¼Œè¯†åˆ«ï¼š
 * 1. æ–°å¢æ®µè½
 * 2. åˆ é™¤æ®µè½
 * 3. ä¿®æ”¹æ®µè½
 * 4. æ— å˜åŒ–
 */

interface ContextSection {
  id: string;           // æ®µè½å”¯ä¸€æ ‡è¯†ï¼ˆåŸºäºæ ‡é¢˜+è¡Œå·ï¼‰
  title: string;        // æ®µè½æ ‡é¢˜
  content: string;      // æ®µè½å†…å®¹
  lineStart: number;    // èµ·å§‹è¡Œå·
  lineEnd: number;      // ç»“æŸè¡Œå·
  hash: string;         // å†…å®¹å“ˆå¸Œï¼ˆSHA-256ï¼‰
  priority: 'P0' | 'P1' | 'P2' | 'P3';  // ä¼˜å…ˆçº§
  module: 'Core' | 'Integration' | 'Experience' | 'Docs';  // æ¨¡å—
}

interface ChangeDelta {
  version: string;      // ç‰ˆæœ¬å·ï¼ˆé€’å¢ï¼‰
  timestamp: string;    // ISO æ—¶é—´æˆ³
  changes: SectionChange[];
  summary: ChangeSummary;
}

interface SectionChange {
  type: 'add' | 'delete' | 'modify';
  section: ContextSection;
  diff?: string;        // æ–‡æœ¬å·®å¼‚ï¼ˆunified diff formatï¼‰
}

interface ChangeSummary {
  totalChanges: number;
  byModule: {
    Core: number;
    Integration: number;
    Experience: number;
    Docs: number;
  };
  byPriority: {
    P0: number;
    P1: number;
    P2: number;
    P3: number;
  };
  criticalChanges: string[];  // P0/P1 å˜æ›´çš„æ®µè½ ID
}

/**
 * å˜æ›´æ£€æµ‹ç®—æ³•
 *
 * @param oldSections - æ—§çš„æ®µè½åˆ—è¡¨
 * @param newSections - æ–°çš„æ®µè½åˆ—è¡¨
 * @returns å˜æ›´å¢é‡
 */
function detectChanges(
  oldSections: ContextSection[],
  newSections: ContextSection[]
): ChangeDelta {
  const changes: SectionChange[] = [];
  const oldMap = new Map(oldSections.map(s => [s.id, s]));
  const newMap = new Map(newSections.map(s => [s.id, s]));

  // 1. æ£€æµ‹åˆ é™¤å’Œä¿®æ”¹
  for (const [id, oldSection] of oldMap) {
    const newSection = newMap.get(id);

    if (!newSection) {
      // åˆ é™¤
      changes.push({
        type: 'delete',
        section: oldSection
      });
    } else if (oldSection.hash !== newSection.hash) {
      // ä¿®æ”¹
      changes.push({
        type: 'modify',
        section: newSection,
        diff: generateDiff(oldSection.content, newSection.content)
      });
    }
  }

  // 2. æ£€æµ‹æ–°å¢
  for (const [id, newSection] of newMap) {
    if (!oldMap.has(id)) {
      changes.push({
        type: 'add',
        section: newSection
      });
    }
  }

  // 3. ç”Ÿæˆæ‘˜è¦
  const summary = generateChangeSummary(changes);

  return {
    version: generateVersion(),
    timestamp: new Date().toISOString(),
    changes,
    summary
  };
}

/**
 * ç”Ÿæˆå˜æ›´æ‘˜è¦
 */
function generateChangeSummary(changes: SectionChange[]): ChangeSummary {
  const byModule = { Core: 0, Integration: 0, Experience: 0, Docs: 0 };
  const byPriority = { P0: 0, P1: 0, P2: 0, P3: 0 };
  const criticalChanges: string[] = [];

  for (const change of changes) {
    const { section } = change;

    // æŒ‰æ¨¡å—ç»Ÿè®¡
    byModule[section.module]++;

    // æŒ‰ä¼˜å…ˆçº§ç»Ÿè®¡
    byPriority[section.priority]++;

    // è®°å½•å…³é”®å˜æ›´
    if (section.priority === 'P0' || section.priority === 'P1') {
      criticalChanges.push(section.id);
    }
  }

  return {
    totalChanges: changes.length,
    byModule,
    byPriority,
    criticalChanges
  };
}

/**
 * ç”Ÿæˆæ–‡æœ¬å·®å¼‚ï¼ˆUnified Diff Formatï¼‰
 */
function generateDiff(oldText: string, newText: string): string {
  const oldLines = oldText.split('\n');
  const newLines = newText.split('\n');

  // ä½¿ç”¨ Myers Difference Algorithm
  const edits = computeEditDistance(oldLines, newLines);

  // ç”Ÿæˆ unified diff
  let diff = '';
  let lineNum = 0;

  for (const edit of edits) {
    switch (edit.type) {
      case 'equal':
        for (const line of edit.lines) {
          diff += ` ${line}\n`;
          lineNum++;
        }
        break;
      case 'delete':
        for (const line of edit.lines) {
          diff += `-${line}\n`;
        }
        break;
      case 'insert':
        for (const line of edit.lines) {
          diff += `+${line}\n`;
          lineNum++;
        }
        break;
    }
  }

  return diff;
}
```

### 3.2 å¢é‡åŒæ­¥åè®®

```typescript
/**
 * å¢é‡åŒæ­¥åè®®
 *
 * @description
 * å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„åŒæ­¥åè®®
 */

enum SyncMode {
  FULL = 'full',      // å…¨é‡åŒæ­¥ï¼ˆé¦–æ¬¡æˆ–ä¸¥é‡ä¸ä¸€è‡´ï¼‰
  INCREMENTAL = 'incremental',  // å¢é‡åŒæ­¥ï¼ˆæ­£å¸¸æƒ…å†µï¼‰
  METADATA = 'metadata' // ä»…åŒæ­¥å…ƒæ•°æ®ï¼ˆå¿«é€Ÿæ£€æŸ¥ï¼‰
}

interface SyncRequest {
  mode: SyncMode;
  clientVersion?: string;  // å®¢æˆ·ç«¯å½“å‰ç‰ˆæœ¬
  since?: string;          // åŒæ­¥è‡ªæ­¤æ—¶é—´æˆ³
  modules?: string[];      // è®¢é˜…çš„æ¨¡å—åˆ—è¡¨
}

interface SyncResponse {
  success: boolean;
  version: string;         // æœåŠ¡å™¨æœ€æ–°ç‰ˆæœ¬
  mode: SyncMode;
  data?: SyncData;
  error?: string;
}

interface SyncData {
  // å…ƒæ•°æ®æ¨¡å¼
  summary?: ChangeSummary;

  // å¢é‡æ¨¡å¼
  delta?: ChangeDelta;

  // å…¨é‡æ¨¡å¼
  fullContext?: {
    sections: ContextSection[];
    metadata: ContextMetadata;
  };
}

interface ContextMetadata {
  version: string;
  timestamp: string;
  totalSections: number;
  checksum: string;  // æ•´ä½“æ ¡éªŒå’Œ
  size: number;      // å­—èŠ‚æ•°
}

/**
 * åŒæ­¥æœåŠ¡
 */
class IncrementalSyncService {
  private contextManager: ContextManager;
  private deltaStore: DeltaStore;
  private eventBus: EventBus;

  /**
   * å¤„ç†åŒæ­¥è¯·æ±‚
   */
  async handleSync(request: SyncRequest): Promise<SyncResponse> {
    try {
      const serverVersion = await this.contextManager.getCurrentVersion();

      switch (request.mode) {
        case SyncMode.METADATA:
          // ä»…è¿”å›å…ƒæ•°æ®
          const summary = await this.deltaStore.getLatestSummary();
          return {
            success: true,
            version: serverVersion,
            mode: SyncMode.METADATA,
            data: { summary }
          };

        case SyncMode.INCREMENTAL:
          // å¢é‡åŒæ­¥
          if (request.clientVersion === serverVersion) {
            // å·²ç»æ˜¯æœ€æ–°
            return {
              success: true,
              version: serverVersion,
              mode: SyncMode.INCREMENTAL
            };
          }

          // è·å–å¢é‡
          const delta = await this.deltaStore.getDeltaSince(
            request.clientVersion!
          );

          return {
            success: true,
            version: serverVersion,
            mode: SyncMode.INCREMENTAL,
            data: { delta }
          };

        case SyncMode.FULL:
          // å…¨é‡åŒæ­¥
          const fullContext = await this.contextManager.getFullContext();
          return {
            success: true,
            version: serverVersion,
            mode: SyncMode.FULL,
            data: { fullContext }
          };
      }
    } catch (error) {
      return {
        success: false,
        version: '',
        mode: request.mode,
        error: error.message
      };
    }
  }

  /**
   * åº”ç”¨å¢é‡æ›´æ–°
   */
  async applyDelta(delta: ChangeDelta): Promise<void> {
    // 1. åº”ç”¨å˜æ›´
    await this.contextManager.applyChanges(delta.changes);

    // 2. æ›´æ–°ç‰ˆæœ¬
    await this.contextManager.updateVersion(delta.version);

    // 3. è§¦å‘é€šçŸ¥
    await this.eventBus.publish('context:updated', {
      version: delta.version,
      summary: delta.summary
    });
  }
}
```

---

## å››ã€å­˜å‚¨ç»“æ„è®¾è®¡

### 4.1 æ–‡ä»¶ç»„ç»‡

```
~/.reflectguard/
â”œâ”€â”€ level-1-hot/
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â”œâ”€â”€ CLAUDE.md              # ä¸»ä¸Šä¸‹æ–‡æ–‡ä»¶ï¼ˆ21KBï¼‰
â”‚   â”‚   â”œâ”€â”€ CLAUDE.meta.json       # å…ƒæ•°æ®ï¼ˆ1KBï¼‰
â”‚   â”‚   â”‚   {
â”‚   â”‚   â”‚     "version": "v20260206.001",
â”‚   â”‚   â”‚     "timestamp": "2026-02-06T10:30:00Z",
â”‚   â”‚   â”‚     "totalSections": 45,
â”‚   â”‚   â”‚     "checksum": "sha256:abc123...",
â”‚   â”‚   â”‚     "size": 21386
â”‚   â”‚   â”‚   }
â”‚   â”‚   â””â”€â”€ CLAUDE.index.json      # æ®µè½ç´¢å¼•ï¼ˆ2KBï¼‰
â”‚   â”‚       [
â”‚   â”‚         {"id": "sec-001", "title": "é¡¹ç›®æ„¿æ™¯", "line": 38, "hash": "..."},
â”‚   â”‚         {"id": "sec-002", "title": "æ¶æ„æ€»è§ˆ", "line": 53, "hash": "..."}
â”‚   â”‚       ]
â”‚   â”‚
â”‚   â””â”€â”€ deltas/
â”‚       â”œâ”€â”€ 20260206.001.json      # å¢é‡è®°å½•ï¼ˆå‹ç¼©ï¼‰
â”‚       â”œâ”€â”€ 20260206.002.json
â”‚       â””â”€â”€ index.json             # å¢é‡ç´¢å¼•
â”‚           [
â”‚             {"version": "v20260206.001", "timestamp": "...", "size": 1024},
â”‚             {"version": "v20260206.002", "timestamp": "...", "size": 2048}
â”‚           ]
â”‚
â”œâ”€â”€ level-2-warm/
â”‚   â””â”€â”€ context-history/
â”‚       â”œâ”€â”€ snapshot-20260205.json  # æ¯æ—¥å¿«ç…§ï¼ˆä¿ç•™7å¤©ï¼‰
â”‚       â””â”€â”€ snapshot-20260206.json
â”‚
â””â”€â”€ level-3-cold/
    â””â”€â”€ context-archive/
        â””â”€â”€ 2026/
            â””â”€â”€ 01/
                â””â”€â”€ snapshot-20260131.json  # å½’æ¡£ï¼ˆæœˆåº¦ï¼‰
```

### 4.2 å…ƒæ•°æ®æ ¼å¼

```typescript
/**
 * ä¸Šä¸‹æ–‡å…ƒæ•°æ®
 */
interface ContextMetadata {
  // åŸºæœ¬ä¿¡æ¯
  version: string;              // ç‰ˆæœ¬å·ï¼ˆvYYYYMMDD.nnnï¼‰
  timestamp: string;            // ISO æ—¶é—´æˆ³
  totalSections: number;        // æ€»æ®µè½æ•°

  // æ ¡éªŒä¿¡æ¯
  checksum: string;             // SHA-256 æ ¡éªŒå’Œ
  size: number;                 // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰

  // å˜æ›´æ‘˜è¦
  lastChange: {
    version: string;            // ä¸Šæ¬¡å˜æ›´ç‰ˆæœ¬
    timestamp: string;
    summary: ChangeSummary;
  };

  // æ¨¡å—ä¿¡æ¯
  modules: {
    [key: string]: {
      sectionCount: number;
      lastUpdate: string;
      priority: string;
    };
  };
}

/**
 * æ®µè½ç´¢å¼•
 */
interface SectionIndex {
  id: string;
  title: string;
  lineStart: number;
  lineEnd: number;
  hash: string;
  priority: string;
  module: string;
  tags: string[];
}

/**
 * å¢é‡è®°å½•
 */
interface DeltaRecord {
  version: string;
  timestamp: string;
  changes: SectionChange[];
  summary: ChangeSummary;
  compressed: boolean;          // æ˜¯å¦å‹ç¼©
  size: number;
}
```

---

## äº”ã€ä¸»åŠ¨é€šçŸ¥æœºåˆ¶

### 5.1 äº‹ä»¶é©±åŠ¨æ¶æ„

```typescript
/**
 * äº‹ä»¶æ€»çº¿
 */
class ContextEventBus {
  private subscribers: Map<string, Set<Subscriber>>;

  /**
   * å‘å¸ƒäº‹ä»¶
   */
  async publish(event: string, payload: any): Promise<void> {
    const subs = this.subscribers.get(event);
    if (!subs) return;

    const notifications = Array.from(subs).map(sub =>
      this.notify(sub, payload)
    );

    await Promise.all(notifications);
  }

  /**
   * è®¢é˜…äº‹ä»¶
   */
  subscribe(event: string, filter: SubscriptionFilter): Subscriber {
    const subscriber: Subscriber = {
      id: generateId(),
      filter,
      callback: null  // ç”±å®¢æˆ·ç«¯è®¾ç½®
    };

    if (!this.subscribers.has(event)) {
      this.subscribers.set(event, new Set());
    }

    this.subscribers.get(event)!.add(subscriber);
    return subscriber;
  }

  /**
   * é€šçŸ¥è®¢é˜…è€…
   */
  private async notify(subscriber: Subscriber, payload: any): Promise<void> {
    // åº”ç”¨è¿‡æ»¤å™¨
    if (!this.matchesFilter(subscriber.filter, payload)) {
      return;
    }

    // å‘é€é€šçŸ¥
    if (subscriber.callback) {
      await subscriber.callback(payload);
    }
  }

  /**
   * åŒ¹é…è¿‡æ»¤å™¨
   */
  private matchesFilter(filter: SubscriptionFilter, payload: any): boolean {
    // æ¨¡å—è¿‡æ»¤
    if (filter.modules && filter.modules.length > 0) {
      const payloadModules = new Set(payload.summary?.byModule || {});
      if (!filter.modules.some(m => payloadModules.has(m))) {
        return false;
      }
    }

    // ä¼˜å…ˆçº§è¿‡æ»¤
    if (filter.minPriority) {
      const priorityOrder = { P0: 0, P1: 1, P2: 2, P3: 3 };
      const minLevel = priorityOrder[filter.minPriority];

      for (const change of payload.changes || []) {
        const changeLevel = priorityOrder[change.section.priority];
        if (changeLevel <= minLevel) {
          return true;  // æœ‰è‡³å°‘ä¸€ä¸ªé«˜ä¼˜å…ˆçº§å˜æ›´
        }
      }

      return false;
    }

    return true;
  }
}

/**
 * è®¢é˜…è¿‡æ»¤å™¨
 */
interface SubscriptionFilter {
  modules?: string[];          // è®¢é˜…çš„æ¨¡å—
  minPriority?: 'P0' | 'P1' | 'P2' | 'P3';  // æœ€ä½ä¼˜å…ˆçº§
  keywords?: string[];         // å…³é”®è¯åŒ¹é…
}

/**
 * è®¢é˜…è€…
 */
interface Subscriber {
  id: string;
  filter: SubscriptionFilter;
  callback: (payload: any) => Promise<void>;
}

/**
 * é€šçŸ¥æœåŠ¡
 */
class NotificationService {
  private eventBus: ContextEventBus;
  private channels: Map<string, NotificationChannel>;

  /**
   * å‘é€é€šçŸ¥
   */
  async sendNotification(
    recipient: string,
    message: ContextChangeNotification
  ): Promise<void> {
    const channel = this.channels.get(recipient);
    if (!channel) {
      console.warn(`[WARN] No notification channel for ${recipient}`);
      return;
    }

    await channel.send(message);
  }
}

/**
 * ä¸Šä¸‹æ–‡å˜æ›´é€šçŸ¥
 */
interface ContextChangeNotification {
  version: string;
  timestamp: string;
  summary: ChangeSummary;
  criticalChanges: string[];   // P0/P1 å˜æ›´æè¿°
  actionUrl?: string;          // å¿«é€Ÿæ“ä½œé“¾æ¥
}
```

### 5.2 é€šçŸ¥æ¸ é“

```typescript
/**
 * WebSocket é€šçŸ¥æ¸ é“
 */
class WebSocketNotificationChannel implements NotificationChannel {
  private ws: WebSocket;

  async send(message: ContextChangeNotification): Promise<void> {
    if (this.ws.readyState === WebSocket.OPEN) {
      this.ws.send(JSON.stringify({
        type: 'context:updated',
        data: message
      }));
    }
  }
}

/**
 * HTTP é•¿è½®è¯¢é€šçŸ¥æ¸ é“
 */
class LongPollingNotificationChannel implements NotificationChannel {
  private pendingRequests: Set<Promise<Response>>;

  async send(message: ContextChangeNotification): Promise<void> {
    // ç«‹å³å“åº”æ‰€æœ‰æŒ‚èµ·çš„è½®è¯¢è¯·æ±‚
    for (const request of this.pendingRequests) {
      request.then(res => {
        res.json(message);
      });
    }

    this.pendingRequests.clear();
  }
}

/**
 * è¯­éŸ³é€šçŸ¥æ¸ é“ï¼ˆæœ¬åœ°ï¼‰
 */
class VoiceNotificationChannel implements NotificationChannel {
  async send(message: ContextChangeNotification): Promise<void> {
    // ç”Ÿæˆè¯­éŸ³æç¤º
    const summary = this.generateVoiceSummary(message);
    const voiceId = 'd3MFdIuCfbAIwiu7jC4a';  // Intern voice

    await fetch('http://localhost:8888/notify', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        message: summary,
        voice_id: voiceId,
        title: 'Context Update'
      })
    });
  }

  private generateVoiceSummary(message: ContextChangeNotification): string {
    const critical = message.summary.criticalChanges.length;
    const total = message.summary.totalChanges;

    if (critical > 0) {
      return `ä¸Šä¸‹æ–‡å·²æ›´æ–°ï¼š${critical}ä¸ªå…³é”®å˜æ›´ï¼Œ${total}ä¸ªæ€»å˜æ›´`;
    } else {
      return `ä¸Šä¸‹æ–‡å·²æ›´æ–°ï¼š${total}ä¸ªå˜æ›´`;
    }
  }
}
```

---

## å…­ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 6.1 å‹ç¼©ä¼˜åŒ–

```typescript
/**
 * å¢é‡å‹ç¼©å™¨
 *
 * @description
 * ä½¿ç”¨ gzip å‹ç¼©å¢é‡æ•°æ®
 */
class DeltaCompressor {
  async compress(delta: ChangeDelta): Promise<Buffer> {
    const json = JSON.stringify(delta);
    const buffer = Buffer.from(json, 'utf-8');

    return await gzip(buffer);
  }

  async decompress(data: Buffer): Promise<ChangeDelta> {
    const decompressed = await gunzip(data);
    const json = decompressed.toString('utf-8');

    return JSON.parse(json);
  }
}

/**
 * å‹ç¼©æ•ˆæœé¢„ä¼°
 */
const COMPRESSION_ESTIMATE = {
  // å…ƒæ•°æ®ï¼ˆ1KBï¼‰â†’ å‹ç¼©å ~300Bï¼ˆ70% å‹ç¼©ç‡ï¼‰
  metadata: {
    original: 1024,
    compressed: 300,
    ratio: 0.29
  },

  // å°å¢é‡ï¼ˆ2KBï¼‰â†’ å‹ç¼©å ~600B
  smallDelta: {
    original: 2048,
    compressed: 600,
    ratio: 0.29
  },

  // å¤§å¢é‡ï¼ˆ10KBï¼‰â†’ å‹ç¼©å ~2KB
  largeDelta: {
    original: 10240,
    compressed: 2048,
    ratio: 0.20
  }
};
```

### 6.2 æ‰¹é‡å†™å…¥ä¼˜åŒ–

```typescript
/**
 * æ‰¹é‡å†™å…¥é˜Ÿåˆ—
 *
 * @description
 * å»¶è¿Ÿå†™å…¥ï¼Œæ‰¹é‡æäº¤ï¼Œå‡å°‘ IO æ¬¡æ•°
 */
class BatchWriteQueue {
  private queue: Array<{
    key: string;
    value: any;
    timestamp: number;
  }> = [];
  private flushTimer?: NodeJS.Timeout;
  private readonly maxDelay = 2000;  // æœ€å¤§å»¶è¿Ÿ 2 ç§’
  private readonly maxBatch = 10;    // æœ€å¤§æ‰¹é‡ 10 æ¡

  /**
   * æ·»åŠ å†™å…¥ä»»åŠ¡
   */
  async write(key: string, value: any): Promise<void> {
    this.queue.push({ key, value, timestamp: Date.now() });

    // è§¦å‘æ‰¹é‡å†™å…¥
    if (this.queue.length >= this.maxBatch) {
      await this.flush();
    } else if (!this.flushTimer) {
      // è®¾ç½®å»¶è¿Ÿå®šæ—¶å™¨
      this.flushTimer = setTimeout(() => this.flush(), this.maxDelay);
    }
  }

  /**
   * åˆ·æ–°é˜Ÿåˆ—
   */
  private async flush(): Promise<void> {
    if (this.flushTimer) {
      clearTimeout(this.flushTimer);
      this.flushTimer = undefined;
    }

    if (this.queue.length === 0) return;

    const batch = this.queue.splice(0);

    // æ‰¹é‡å†™å…¥
    await Promise.all(
      batch.map(({ key, value }) => this.writeToDisk(key, value))
    );
  }

  private async writeToDisk(key: string, value: any): Promise<void> {
    // å®é™…å†™å…¥é€»è¾‘
    await writeFile(key, JSON.stringify(value));
  }
}
```

### 6.3 ç¼“å­˜ç­–ç•¥

```typescript
/**
 * åˆ†å±‚ç¼“å­˜
 */
class TieredCache {
  private l1: Map<string, CacheEntry>;  // çƒ­æ•°æ®ï¼ˆå†…å­˜ï¼‰
  private l2: LRUCache<string, any>;    // æ¸©æ•°æ®ï¼ˆLRUï¼‰

  /**
   * ç¼“å­˜ç­–ç•¥
   */
  private readonly CACHE_POLICY = {
    // å…ƒæ•°æ®ï¼šæ°¸ä¹…ç¼“å­˜ï¼ˆç›´åˆ°ç‰ˆæœ¬å˜æ›´ï¼‰
    metadata: {
      ttl: Infinity,
      size: 10
    },

    // æ®µè½ç´¢å¼•ï¼šç¼“å­˜ 5 åˆ†é’Ÿ
    sectionIndex: {
      ttl: 300000,  // 5 min
      size: 100
    },

    // å¢é‡è®°å½•ï¼šç¼“å­˜ 1 å°æ—¶
    deltaRecord: {
      ttl: 3600000,  // 1 hour
      size: 50
    }
  };

  /**
   * è·å–ç¼“å­˜
   */
  async get(key: string, type: keyof typeof this.CACHE_POLICY): Promise<any> {
    const policy = this.CACHE_POLICY[type];

    // å…ˆæŸ¥ L1
    const l1Entry = this.l1.get(key);
    if (l1Entry && Date.now() - l1Entry.timestamp < policy.ttl) {
      return l1Entry.data;
    }

    // å†æŸ¥ L2
    const l2Data = this.l2.get(key);
    if (l2Data) {
      // å›å¡« L1
      this.l1.set(key, {
        data: l2Data,
        timestamp: Date.now()
      });
      return l2Data;
    }

    return null;
  }

  /**
   * è®¾ç½®ç¼“å­˜
   */
  async set(key: string, data: any, type: keyof typeof this.CACHE_POLICY): Promise<void> {
    const policy = this.CACHE_POLICY[type];

    // å†™å…¥ L1
    this.l1.set(key, {
      data,
      timestamp: Date.now()
    });

    // å†™å…¥ L2
    this.l2.set(key, data);
  }
}
```

---

## ä¸ƒã€æ€§èƒ½è¯„ä¼°

### 7.1 é¢„æœŸæ€§èƒ½æå‡

| åœºæ™¯ | å½“å‰ | ä¼˜åŒ–å | æå‡ |
|------|------|--------|------|
| **æ— å˜æ›´åŒæ­¥** | 15 åˆ†é’Ÿ | 10 ç§’ï¼ˆå…ƒæ•°æ®æ£€æŸ¥ï¼‰ | **90 å€** |
| **å°å˜æ›´ï¼ˆ<5 æ®µï¼‰** | 15 åˆ†é’Ÿ | 30 ç§’ | **30 å€** |
| **ä¸­å˜æ›´ï¼ˆ5-20 æ®µï¼‰** | 15 åˆ†é’Ÿ | 1 åˆ†é’Ÿ | **15 å€** |
| **å¤§å˜æ›´ï¼ˆ>20 æ®µï¼‰** | 15 åˆ†é’Ÿ | 2 åˆ†é’Ÿ | **7.5 å€** |
| **é¦–æ¬¡åŒæ­¥** | 15 åˆ†é’Ÿ | 2 åˆ†é’Ÿï¼ˆå…¨é‡ï¼‰ | **7.5 å€** |

### 7.2 ååé‡åˆ†æ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ååé‡æå‡åˆ†æ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  å½“å‰ååé‡ï¼š                                        â”‚
â”‚    - 1 æ¬¡åŒæ­¥ / 15 åˆ†é’Ÿ                             â”‚
â”‚    - 4 æ¬¡åŒæ­¥ / å°æ—¶                                â”‚
â”‚    - 96 æ¬¡åŒæ­¥ / å¤©                                 â”‚
â”‚                                                     â”‚
â”‚  ä¼˜åŒ–åååé‡ï¼ˆå¹³å‡åœºæ™¯ï¼‰ï¼š                           â”‚
â”‚    - 2 æ¬¡åŒæ­¥ / åˆ†é’Ÿï¼ˆå…ƒæ•°æ® + å¢é‡ï¼‰                â”‚
â”‚    - 120 æ¬¡åŒæ­¥ / å°æ—¶                              â”‚
â”‚    - 2880 æ¬¡åŒæ­¥ / å¤©                               â”‚
â”‚                                                     â”‚
â”‚  ååé‡æå‡ï¼š2880 / 96 = 30 å€                      â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 èµ„æºå ç”¨

| èµ„æº | å½“å‰ | ä¼˜åŒ–å | å˜åŒ– |
|------|------|--------|------|
| **ç£ç›˜ç©ºé—´** | ~21KB | ~30KBï¼ˆå«å¢é‡å†å²ï¼‰ | +40% |
| **å†…å­˜å ç”¨** | ~50KB | ~100KBï¼ˆç¼“å­˜ï¼‰ | +100% |
| **ç½‘ç»œæµé‡** | 21KB/æ¬¡ | 1-10KB/æ¬¡ï¼ˆå‹ç¼©åï¼‰ | -50% ~ -90% |
| **CPU ä½¿ç”¨** | ä½ | ä¸­ï¼ˆdiff è®¡ç®—ï¼‰ | +50% |

### 7.4 å»¶è¿Ÿåˆ†è§£

```
å…ƒæ•°æ®åŒæ­¥ï¼ˆ1KBï¼‰ï¼š
  - è¯»å–ï¼š10ms
  - ä¼ è¾“ï¼š5msï¼ˆå‹ç¼©å 300Bï¼‰
  - è§£æï¼š2ms
  - æ€»è®¡ï¼š~20ms

å¢é‡åŒæ­¥ï¼ˆ5KB â†’ 600Bï¼‰ï¼š
  - Diff è®¡ç®—ï¼š50ms
  - å‹ç¼©ï¼š10ms
  - ä¼ è¾“ï¼š5ms
  - åº”ç”¨ï¼š100ms
  - æ€»è®¡ï¼š~165ms

å…¨é‡åŒæ­¥ï¼ˆ21KBï¼‰ï¼š
  - è¯»å–ï¼š50ms
  - å‹ç¼©ï¼š30ms
  - ä¼ è¾“ï¼š30ms
  - è§£æï¼š100ms
  - æ€»è®¡ï¼š~210ms
```

---

## å…«ã€å®æ–½è·¯çº¿å›¾

### Phase 1: åŸºç¡€è®¾æ–½ï¼ˆDay 1-2ï¼‰

- [ ] å®ç° `ContextSection` è§£æå™¨
- [ ] å®ç°æ®µè½å“ˆå¸Œè®¡ç®—
- [ ] å®ç°å…ƒæ•°æ®å­˜å‚¨ç»“æ„
- [ ] å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ >90%ï¼‰

### Phase 2: å¢é‡ç®—æ³•ï¼ˆDay 3-4ï¼‰

- [ ] å®ç° `detectChanges()` ç®—æ³•
- [ ] å®ç° `generateDiff()` å·®å¼‚ç®—æ³•
- [ ] å®ç°å¢é‡å­˜å‚¨ï¼ˆDeltaStoreï¼‰
- [ ] é›†æˆæµ‹è¯•

### Phase 3: åŒæ­¥åè®®ï¼ˆDay 5-6ï¼‰

- [ ] å®ç° `IncrementalSyncService`
- [ ] å®ç°åŒæ­¥åè®®ï¼ˆSyncModeï¼‰
- [ ] å®ç°ç‰ˆæœ¬ç®¡ç†
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•

### Phase 4: é€šçŸ¥ç³»ç»Ÿï¼ˆDay 7-8ï¼‰

- [ ] å®ç° `ContextEventBus`
- [ ] å®ç°è®¢é˜…è¿‡æ»¤å™¨
- [ ] å®ç° WebSocket é€šçŸ¥
- [ ] å®ç°è¯­éŸ³é€šçŸ¥

### Phase 5: æ€§èƒ½ä¼˜åŒ–ï¼ˆDay 9-10ï¼‰

- [ ] å®ç°å¢é‡å‹ç¼©
- [ ] å®ç°æ‰¹é‡å†™å…¥é˜Ÿåˆ—
- [ ] å®ç°åˆ†å±‚ç¼“å­˜
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

### Phase 6: éƒ¨ç½²ä¸éªŒè¯ï¼ˆDay 11-12ï¼‰

- [ ] ç°åº¦å‘å¸ƒ
- [ ] ç›‘æ§ä¸è°ƒä¼˜
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] å›¢é˜ŸåŸ¹è®­

---

## ä¹ã€é£é™©è¯„ä¼°ä¸åº”å¯¹

### 9.1 æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| Diff ç®—æ³•æ€§èƒ½å·® | ä¸­ | é«˜ | ä½¿ç”¨æˆç†Ÿåº“ï¼ˆdiff-match-patchï¼‰ |
| ç‰ˆæœ¬å†²çª | ä¸­ | ä¸­ | å®ç°å†²çªæ£€æµ‹ä¸åˆå¹¶ç­–ç•¥ |
| å‹ç¼©å¤±è´¥ | ä½ | ä½ | é™çº§åˆ°æœªå‹ç¼©æ¨¡å¼ |
| ç¼“å­˜ä¸ä¸€è‡´ | ä¸­ | é«˜ | ä½¿ç”¨ç‰ˆæœ¬å· + æ ¡éªŒå’ŒéªŒè¯ |

### 9.2 ä¸šåŠ¡é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| å…¼å®¹æ€§é—®é¢˜ | ä½ | é«˜ | ä¿ç•™å…¨é‡åŒæ­¥å›é€€ |
| å­¦ä¹ æˆæœ¬ | ä¸­ | ä¸­ | è¯¦ç»†æ–‡æ¡£ + åŸ¹è®­ |
| è¿ç§»å¤æ‚åº¦ | ä¸­ | ä¸­ | Shadow Migration Pattern |

---

## åã€æ€»ç»“

### 10.1 æ ¸å¿ƒä»·å€¼

1. **æ•ˆç‡æå‡**ï¼šåŒæ­¥å»¶è¿Ÿä» 15 åˆ†é’Ÿ â†’ 2 åˆ†é’Ÿï¼ˆ7.5 å€ï¼‰
2. **èµ„æºä¼˜åŒ–**ï¼šç½‘ç»œæµé‡å‡å°‘ 50%-90%
3. **å®æ—¶æ€§**ï¼šæ”¯æŒä¸»åŠ¨é€šçŸ¥ï¼Œæ— éœ€è½®è¯¢
4. **å¯æ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•

### 10.2 å…³é”®åˆ›æ–°

1. **åˆ†å±‚åŒæ­¥**ï¼šå…ƒæ•°æ® + å¢é‡ + å…¨é‡ï¼Œçµæ´»ç»„åˆ
2. **æ®µè½çº§åˆ«å˜æ›´æ£€æµ‹**ï¼šç»†ç²’åº¦å·®å¼‚è¯†åˆ«
3. **äº‹ä»¶é©±åŠ¨é€šçŸ¥**ï¼šå®æ—¶æ¨é€ï¼ŒæŒ‰éœ€è®¢é˜…
4. **æ‰¹é‡å†™å…¥ + å‹ç¼©**ï¼šå‡å°‘ IO å’Œç½‘ç»œå¼€é”€

### 10.3 ä¸‹ä¸€æ­¥

âœ… **å·²å®Œæˆï¼š**
- æ¶æ„è®¾è®¡
- ç®—æ³•è®¾è®¡
- æ¥å£å®šä¹‰

ğŸš§ **è¿›è¡Œä¸­ï¼š**
- å¾…å®¡æ‰¹è®¾è®¡æ–‡æ¡£
- å¾…å¯åŠ¨å®æ–½

â³ **å¾…å¼€å§‹ï¼š**
- Phase 1: åŸºç¡€è®¾æ–½å®ç°
- ...

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 1.0.0
**æœ€åæ›´æ–°ï¼š** 2026-02-06
**ç»´æŠ¤è€…ï¼š** Coordinator Agent
